# CHANGELOG

## v1 版本升级 v2 版本

### 规则格式的主要变化：

1. 把 `:` 替换成`[]`, 那 `::` 替换成`()`.
- [] 中括号支持自动传@this，() 括号不支持，刚好（）跟 正常调用一样
- 例如：`equal:20` 将变成 `equal[20]`; `equal::@age,20` 将变成 `equal(@age,20)`

搜索替换规则：`::([^\||"]*)` => `($1)`
搜索替换规则：`:([^\||"]*)` => `[$1]`

2. 把 `if?`，`if1?` 替换成 `if()`, 把 `if0?` 替换成 `!if()`
- 例如： `if?equal::@age,20|required` 替换成 `if(equal(@age,20))|required`

搜索替换规则：`if0\?([^\|]*)` => `!if($1)`
搜索替换规则：`if\?([^\|]*)` => `if($1)`

3. 把 @me 替换成 @this

### 修复项目规则的方法

1. 搜索替换规则：`if1?\?([^\|]*)` => `if($1)`
2. 搜索替换规则：`::([^\||"|)]*)(?=\)\|)` => `($1)`
3. 搜索替换规则：`::([^\||"]*)` => `($1)`
4. 搜索替换规则：`(?<!:| |\d|:\w|\]):([\w@\d][^\||"|:| >>]*)(?=\||"|'| >>)` => `[$1]`
5. 把 @me 替换成 @this

## v2 版本更新 validation_global = false 的错误
### 修复 Unit.php
1. 搜索替换规则：`"expected_msg" => ("(Users define - )?(Note! )?([^ ]*) .*")` => `"expected_msg" => [ "$4" => $1 ]`