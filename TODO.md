# TODO

## 优化规则

### ~~优化 "条件规则"~~(完成)
目前，条件规则的写法跟 PHP 语法差不多：
- 正条件：`if()`
- 否条件：`!if()`
但是它实际上代表的是意思是：
1. 如果条件成立，则继续验证后续方法
2. 如果条件不成立，说明该字段是可选的：
  2.1. 若该字段为空，立刻返回验证成功；
  2.2. 若该字段不为空，则继续验证后续方法

但是，它更像是给 required 增加了一个条件，而不是一个纯粹的 if 条件。
后续将优化成一个方法，比如 `required:when()` 和 `required:when_not()`。

任意规则或方法都支持 `when` 和 `when_not`

### 增加真正的 "条件规则"

例如 `"data" => "if(...) {required|int} elseif(...) {required|int} else {optional|/^[a-zA-Z0-9]+$/}"`

## 增加更多的验证方法

### 日期（Date）

- 格式验证：
确保日期遵循特定的格式，例如ISO 8601标准（YYYY-MM-DD）、美国格式（MM/DD/YYYY）或其他常用格式。可以使用正则表达式或内置的日期解析函数来检查日期字符串是否符合预期的格式。

- 有效性验证：
检查日期是否为有效的日子，例如，确保每个月的天数正确（例如，不应该是2月30日或4月31日），以及年份是否在合理的范围内（例如，当前年份的前后几年）。

- 范围验证：
验证日期是否在允许的时间范围内。例如，如果API需要用户输入一个未来的日期，那么需要确保输入的日期确实在当前日期之后。

- 闰年验证：
对于涉及月份或年份的验证，需要考虑闰年的影响。例如，2月在闰年有29天，而不是平常的28天。

- 时间戳验证：
如果日期数据包含时间戳，需要验证时间是否有效，例如，小时数是否在0到23之间，分钟和秒数是否在0到59之间。

- 时区处理：
考虑时区的影响，确保日期和时间在转换为其他时区时仍然准确。时区的转换可能会导致日期的变化，特别是跨越国际日期变更线或夏令时开始和结束的时间。

- 业务规则验证：
根据具体的业务需求，可能还需要对日期进行额外的验证。例如，某些业务场景可能要求用户输入的日期不能是周末或节假日。

### 整数（Integer）

- 正负验证

### 字符串（String）

- 非空性：确保字符串不为null或空（""），并且至少包含一个字符。

- 长度限制：验证字符串的长度是否在指定的范围内，例如，最小长度和最大长度的约束。

- 字符集限制：检查字符串是否只包含特定的字符集，例如，只允许字母、数字或特定范围的Unicode字符。

- 模式匹配：使用正则表达式来验证字符串是否符合特定的模式或格式，例如，电子邮件地址、电话号码、URL等。

- 特殊字符：确保字符串中不包含非法或特殊字符，这些字符可能会影响数据处理或存储，如SQL注入攻击中使用的单引号（'）或分号（;）。

- 编码一致性：验证字符串的编码是否符合预期，如UTF-8或ASCII，确保在不同系统和语言中正确处理。

- 敏感信息：检查字符串中是否包含敏感信息，如信用卡号、密码等，这些信息应进行适当的加密或脱敏处理。

- 重复性和唯一性：在某些情况下，需要验证字符串是否重复或是否具有唯一性，特别是在处理用户输入的数据时。

- 词法和语义验证：对于自然语言处理，可能需要验证字符串的语法和语义是否正确和合理。

- 转义字符：确保字符串中的转义字符（如HTML实体）被正确处理，避免潜在的安全问题。

### 数组（Array）

- 长度验证：检查数组是否包含特定数量的元素。
- 元素类型验证：确保数组中的每个元素都是预期的数据类型。
- 元素存在性验证：确保数组中不包含任何未定义或null的元素。

### 对象（Object）

- 属性存在性验证：检查对象是否包含所有必需的属性。
- 属性类型验证：确保对象的每个属性都是正确的数据类型。
- 嵌套验证：如果对象包含其他对象或数组，需要递归验证这些嵌套结构。

### 文件（File）

- 文件类型验证：检查文件扩展名或MIME类型是否符合允许的类型。
- 文件大小验证：确保文件大小不超过指定的限制。